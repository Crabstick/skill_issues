<!DOCTYPE HTML>
<html lang="en-US">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>python | Skill_issues</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="duoduo369">
        <meta name="description" content="Book generated using GitBook">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../python/django.issue.html" />
        
        
        <link rel="prev" href="../python/README.html" />
        

        <meta property="og:title" content="python | Skill_issues">
        <meta property="og:site_name" content="Skill_issues">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/duoduo369">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

        
        <link rel="stylesheet" href="../gitbook/style.css">
        
        
    </head>
    <body>
        
<div class="book" data-github="duoduo369/skill_issues" data-level="2.1">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="https://github.com/duoduo369/skill_issues" target="_blank" class="btn pull-left"><i class="fa fa-github-alt"></i></a>
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>

    <!-- Actions Right -->
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>

    <a href="https://github.com/duoduo369/skill_issues/stargazers" target="_blank" class="btn pull-right count-star"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/duoduo369/skill_issues/watchers" target="_blank" class="btn pull-right count-watch"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>


    <!-- Title -->
    <h1><a href="../README.html" >Skill_issues</a></h1>
</div>

    <div class="book-summary">
    <ul class="summary">
        <li>
            <a href="https://github.com/duoduo369" target="blank">About the author</a>
        </li>
        <li>
            <a href="https://github.com/duoduo369/skill_issues/issues" target="blank">Questions and Issues</a>
        </li>
        <li>
            <a href="https://github.com/duoduo369/skill_issues/edit/master/python/python.issue.md" target="blank">Edit and Contribute</a>
        </li>
        <li class="divider"></li>
        <li data-level="0">
            <a href="../README.html"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1">
                
                <a href="../front/README.html">
                    <i class="fa fa-check"></i> <b>1)</b> 前端
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1">
                            
                            <a href="../front/angularjs.issue.html">
                                <i class="fa fa-check"></i> <b>1.1)</b> angularjs
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2">
                            
                            <a href="../front/js.issue.html">
                                <i class="fa fa-check"></i> <b>1.2)</b> js
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.3">
                            
                            <a href="../front/css.issue.html">
                                <i class="fa fa-check"></i> <b>1.3)</b> css
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2">
                
                <a href="../python/README.html">
                    <i class="fa fa-check"></i> <b>2)</b> python
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1">
                            
                            <a href="../python/python.issue.html">
                                <i class="fa fa-check"></i> <b>2.1)</b> python
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.2">
                            
                            <a href="../python/django.issue.html">
                                <i class="fa fa-check"></i> <b>2.2)</b> django
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.3">
                            
                            <a href="../python/scrapy.issue.html">
                                <i class="fa fa-check"></i> <b>2.3)</b> scrapy
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.4">
                            
                            <a href="../python/pythonchallenge.issue.html">
                                <i class="fa fa-check"></i> <b>2.4)</b> pythonchallenge
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.5">
                            
                            <a href="../python/zarkpy.issue.html">
                                <i class="fa fa-check"></i> <b>2.5)</b> zarkpy
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="3">
                
                <a href="../git/README.html">
                    <i class="fa fa-check"></i> <b>3)</b> git
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1">
                            
                            <a href="../git/git.issue.html">
                                <i class="fa fa-check"></i> <b>3.1)</b> git
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.2">
                            
                            <a href="../git/gitbook.issue.html">
                                <i class="fa fa-check"></i> <b>3.2)</b> gitbook
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="4">
                
                <a href="../tools/README.html">
                    <i class="fa fa-check"></i> <b>4)</b> tools
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="4.1">
                            
                            <a href="../tools/vim.issue.html">
                                <i class="fa fa-check"></i> <b>4.1)</b> vim
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.2">
                            
                            <a href="../tools/build.issue.html">
                                <i class="fa fa-check"></i> <b>4.2)</b> build
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.3">
                            
                            <a href="../tools/heroku.issue.html">
                                <i class="fa fa-check"></i> <b>4.3)</b> heroku
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="5">
                
                <a href="../skill/README.html">
                    <i class="fa fa-check"></i> <b>5)</b> skill
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="5.1">
                            
                            <a href="../skill/linux.issue.html">
                                <i class="fa fa-check"></i> <b>5.1)</b> linux
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.2">
                            
                            <a href="../skill/nginx.issue.html">
                                <i class="fa fa-check"></i> <b>5.2)</b> nginx
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.3">
                            
                            <a href="../skill/oauth.issue.html">
                                <i class="fa fa-check"></i> <b>5.3)</b> oauth
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.4">
                            
                            <a href="../skill/springmvc.issue.html">
                                <i class="fa fa-check"></i> <b>5.4)</b> springmvc
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
    </ul>
</div>

    <div class="book-body" tabindex="-1">
        <div class="page-wrapper">
            <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 27.272727272727273%;min-width: 22.727272727272727%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../README.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../front/README.html" title="前端" class="chapter done new-chapter" data-progress="1" style="left: 4.545454545454546%;"></a>
    
        <a href="../front/angularjs.issue.html" title="angularjs" class="chapter done " data-progress="1.1" style="left: 9.090909090909092%;"></a>
    
        <a href="../front/js.issue.html" title="js" class="chapter done " data-progress="1.2" style="left: 13.636363636363637%;"></a>
    
        <a href="../front/css.issue.html" title="css" class="chapter done " data-progress="1.3" style="left: 18.181818181818183%;"></a>
    
        <a href="../python/README.html" title="python" class="chapter done new-chapter" data-progress="2" style="left: 22.727272727272727%;"></a>
    
        <a href="../python/python.issue.html" title="python" class="chapter done " data-progress="2.1" style="left: 27.272727272727273%;"></a>
    
        <a href="../python/django.issue.html" title="django" class="chapter  " data-progress="2.2" style="left: 31.818181818181817%;"></a>
    
        <a href="../python/scrapy.issue.html" title="scrapy" class="chapter  " data-progress="2.3" style="left: 36.36363636363637%;"></a>
    
        <a href="../python/pythonchallenge.issue.html" title="pythonchallenge" class="chapter  " data-progress="2.4" style="left: 40.90909090909091%;"></a>
    
        <a href="../python/zarkpy.issue.html" title="zarkpy" class="chapter  " data-progress="2.5" style="left: 45.45454545454545%;"></a>
    
        <a href="../git/README.html" title="git" class="chapter  new-chapter" data-progress="3" style="left: 50%;"></a>
    
        <a href="../git/git.issue.html" title="git" class="chapter  " data-progress="3.1" style="left: 54.54545454545455%;"></a>
    
        <a href="../git/gitbook.issue.html" title="gitbook" class="chapter  " data-progress="3.2" style="left: 59.09090909090909%;"></a>
    
        <a href="../tools/README.html" title="tools" class="chapter  new-chapter" data-progress="4" style="left: 63.63636363636363%;"></a>
    
        <a href="../tools/vim.issue.html" title="vim" class="chapter  " data-progress="4.1" style="left: 68.18181818181819%;"></a>
    
        <a href="../tools/build.issue.html" title="build" class="chapter  " data-progress="4.2" style="left: 72.72727272727273%;"></a>
    
        <a href="../tools/heroku.issue.html" title="heroku" class="chapter  " data-progress="4.3" style="left: 77.27272727272727%;"></a>
    
        <a href="../skill/README.html" title="skill" class="chapter  new-chapter" data-progress="5" style="left: 81.81818181818181%;"></a>
    
        <a href="../skill/linux.issue.html" title="linux" class="chapter  " data-progress="5.1" style="left: 86.36363636363636%;"></a>
    
        <a href="../skill/nginx.issue.html" title="nginx" class="chapter  " data-progress="5.2" style="left: 90.9090909090909%;"></a>
    
        <a href="../skill/oauth.issue.html" title="oauth" class="chapter  " data-progress="5.3" style="left: 95.45454545454545%;"></a>
    
        <a href="../skill/springmvc.issue.html" title="springmvc" class="chapter  " data-progress="5.4" style="left: 100%;"></a>
    
    </div>
</div>

            <div class="page-inner">
            
                <section class="normal" id="section-gitbook_11">
                
                    <h1 id="python-">python的相关问题</h1>
<h2 id="-">#</h2>
<p>结构</p>
<pre><code><span class="hljs-bullet">* </span>python安装相关
<span class="hljs-bullet">* </span>python编码规范
<span class="hljs-bullet">* </span>python语法技巧
<span class="hljs-bullet">* </span>python部分脚本
<span class="hljs-bullet">* </span>python部分资源|文章
</code></pre><h2 id="python-">python安装相关</h2>
<h2 id="-">切换活内豆瓣源</h2>
<pre><code>pip 或者easy_install安装的时候会用国外的源，这个
东西不时会被墙掉，因此换豆瓣的源

linux下,修改~/<span class="hljs-preprocessor">.pip</span>/pip<span class="hljs-preprocessor">.conf</span>，如果没这文件则创建。
windows下，修改%HOMEPATH%\pip\pip<span class="hljs-preprocessor">.ini</span>。
内容为：
[global]
index-url = http://pypi<span class="hljs-preprocessor">.douban</span><span class="hljs-preprocessor">.com</span>/simple
</code></pre><h2 id="virtualenv">virtualenv</h2>
<pre><code>http://www.virtualenv.org
类似虚拟机的一种环境，控制你python安装的好东西

保持你python的版本干净，例如一次开发,项目一django
使用<span class="hljs-number">1.5</span>.<span class="hljs-number">0</span>版本，项目二版本是用<span class="hljs-number">1.6</span>，你同时负责这两个
项目的时候会非常痛苦，传统的方式可以说是无解的(莫非
装了卸卸了装？) 而用virtualenv可以完美解决这个问题，
虚拟环境<span class="hljs-number">1</span>用<span class="hljs-number">1.5</span>.<span class="hljs-number">0</span>,虚拟环境二使用<span class="hljs-number">1.6</span>，需要用那个环境
直接切过去就ok～

安装
<span class="hljs-built_in">sudo</span> pip install virtualenv

新建总的虚拟环境文件夹
mkdir ~/python_env
<span class="hljs-built_in">sudo</span> ln <span class="hljs-operator">-s</span> ~/python_env /opt

<span class="hljs-built_in">cd</span>到你python虚拟环境的文件夹下
<span class="hljs-built_in">cd</span> /opt/python_env

virtualenv ENV <span class="hljs-comment"># 新建名字叫ENV的虚拟环境</span>
virtualenv django1.<span class="hljs-number">6.1</span>  <span class="hljs-comment"># 新建名字叫django1.6.1的虚拟环境</span>

例如我想用django这个环境
<span class="hljs-built_in">source</span> django1.<span class="hljs-number">6.1</span>/bin/activate

结束使用
deactivate

参考自
http://docs.python-guide.org/en/latest/dev/virtualenvs/
</code></pre><h2 id="pip-">pip安装</h2>
<pre><code>requirements.txt里面有一行一行的需要的代码
<span class="hljs-comment"># 例如 </span>
<span class="hljs-constant">Django</span>==1.6
MySQL-python==1.2.4
<span class="hljs-constant">South</span>==0.8.2
<span class="hljs-constant">djangorestframework</span>==2.3.9
<span class="hljs-constant">ipython</span>==1.1.0

pip install -r requirements.txt

pip freeze &gt; ~/requirements.txt <span class="hljs-comment"># 导出已将安装的requirements</span>
</code></pre><h2 id="pil-">PIL 安装</h2>
<p>sudo apt-get install libjpeg62 libjpeg62-dev libfreetype6 libfreetype6-dev
sudo ln -s /usr/lib/x86_64-linux-gnu/libjpeg.so /usr/lib/
sudo ln -s /usr/lib/x86_64-linux-gnu/libfreetype.so /usr/lib/
sudo ln -s /usr/lib/x86_64-linux-gnu/libz.so /usr/lib/</p>
<pre><code>pip install PIL  <span class="hljs-subst">--</span>allow<span class="hljs-attribute">-unverified</span> PIL <span class="hljs-subst">--</span>allow<span class="hljs-attribute">-all</span><span class="hljs-attribute">-external</span>
</code></pre><h2 id="-">用交互模式执行脚本</h2>
<p>python -i XXX.py
ipython -i XXX.py
或者开启ipython后 %run 脚本路径</p>
<h2 id="python-">python编码规范</h2>
<h2 id="import-this">import this</h2>
<pre><code>The Zen <span class="hljs-keyword">of</span> Python

Beautiful <span class="hljs-keyword">is</span> better than ugly.
Explicit <span class="hljs-keyword">is</span> better than implicit.
Simple <span class="hljs-keyword">is</span> better than complex.
Complex <span class="hljs-keyword">is</span> better than complicated.
Flat <span class="hljs-keyword">is</span> better than nested.
Sparse <span class="hljs-keyword">is</span> better than dense.
Readability counts.
Special cases aren't special enough <span class="hljs-keyword">to</span> break <span class="hljs-keyword">the</span> rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In <span class="hljs-keyword">the</span> face <span class="hljs-keyword">of</span> ambiguity, refuse <span class="hljs-keyword">the</span> temptation <span class="hljs-keyword">to</span> guess.
There should be one<span class="hljs-comment">-- and preferably only one --obvious way to do it.</span>
Although <span class="hljs-keyword">that</span> way may <span class="hljs-keyword">not</span> be obvious <span class="hljs-keyword">at</span> <span class="hljs-keyword">first</span> unless you're Dutch.
Now <span class="hljs-keyword">is</span> better than never.
Although never <span class="hljs-keyword">is</span> often better than *right* now.
If <span class="hljs-keyword">the</span> implementation <span class="hljs-keyword">is</span> hard <span class="hljs-keyword">to</span> explain, <span class="hljs-keyword">it</span>'s a bad idea.
If <span class="hljs-keyword">the</span> implementation <span class="hljs-keyword">is</span> easy <span class="hljs-keyword">to</span> explain, <span class="hljs-keyword">it</span> may be a good idea.
Namespaces are one honking great idea <span class="hljs-comment">-- let's do more of those!</span>

<span class="hljs-comment">----</span>

python之禅 

优美胜于丑陋（Python 以编写优美的代码为目标）
明了胜于晦涩（优美的代码应当是明了的，命名规范，风格相似）
简洁胜于复杂（优美的代码应当是简洁的，不要有复杂的内部实现）
复杂胜于凌乱（如果复杂不可避免，那代码间也不能有难懂的关系，要保持接口简洁）
扁平胜于嵌套（优美的代码应当是扁平的，不能有太多的嵌套）
间隔胜于紧凑（优美的代码有适当的间隔，不要奢望一行代码解决问题）
可读性很重要（优美的代码是可读的）
即便假借特例的实用性之名，也不可违背这些规则（这些规则至高无上）
不要包容所有错误，除非你确定需要这样做（精准地捕获异常，不写 except:pass 风格的代码）
当存在多种可能，不要尝试去猜测
而是尽量找一种，最好是唯一一种明显的解决方案（如果不确定，就用穷举法）
虽然这并不容易，因为你不是 Python 之父（这里的 Dutch 是指 Guido ）
做也许好过不做，但不假思索就动手还不如不做（动手之前要细思量）
如果你无法向人描述你的方案，那肯定不是一个好方案；反之亦然（方案测评标准） 
命名空间是一种绝妙的理念，我们应当多加利用（倡导与号召)
</code></pre><h2 id="python-">python 编码规范</h2>
<pre><code>安装pep8 easy_install pep8
安装autopep8 easy_install autopep8

安装pyflakes 检查语法
pip install pyflakes

用法：pep8 XXX.py，就会告诉你哪些行不符pep8的什么规范
      autopep8 XXX.py, 就会直接在shell中显示符合pep8的脚本的代码


可以将pep8和pyflakes放到.git的hacks里面提交前自动检查, 参见git issue

或者编写如下脚本pycheck,然后将这个脚本在bin下建立一个软链接，
sudo ln -s ~/path/pycheck /usr/local/bin/

    <span class="hljs-comment">#!/usr/bin/env python</span>
    <span class="hljs-comment"># -*- coding: utf-8 -*-</span>


    <span class="hljs-keyword">import</span> os
    <span class="hljs-keyword">import</span> sys

    <span class="hljs-keyword">if</span> len(sys.argv) &lt;= <span class="hljs-number">1</span>:
        <span class="hljs-keyword">print</span> <span class="hljs-string">'Usage: pycheck file'</span>
        sys.exit(-<span class="hljs-number">1</span>)

    file_ = sys.argv[<span class="hljs-number">1</span>]

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> file_.endswith(<span class="hljs-string">'.py'</span>):
        <span class="hljs-keyword">print</span> <span class="hljs-string">'only accept *.py file'</span>
        sys.exit(-<span class="hljs-number">1</span>)

    os.system(<span class="hljs-string">"pyflakes %s"</span> % file_)
    os.system(<span class="hljs-string">"pep8 %s"</span> % file_)


PEP8
---

<span class="hljs-number">4</span>个空格而不是制表符
---

每行最多<span class="hljs-number">79</span>个字符,文档注释每行最多<span class="hljs-number">72</span>个
合适使用\(长<span class="hljs-keyword">with</span>,<span class="hljs-keyword">assert</span>),在运算符后面换行，而不是前面
---

一级函数和类定义用两行隔开
类内函数定义用一行隔开
---

<span class="hljs-keyword">import</span>需要分开写，<span class="hljs-keyword">from</span> XX <span class="hljs-keyword">import</span>的时候可以写在一行,
<span class="hljs-keyword">import</span>总是写在文件的顶行(文档注释和模块注释下面),
<span class="hljs-keyword">import</span>按照下面的顺序,并且用空行隔开这三组
<span class="hljs-number">1.</span>标准库
<span class="hljs-number">2.</span>三方库
<span class="hljs-number">3.</span>自定义的模块
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">from</span> subprocess <span class="hljs-keyword">import</span> Popen, PIPE

<span class="hljs-keyword">import</span> 后面写 __all__

Absolute imports are recommended
<span class="hljs-keyword">import</span> mypkg.sibling
<span class="hljs-keyword">from</span> mypkg <span class="hljs-keyword">import</span> sibling
<span class="hljs-keyword">from</span> mypkg.sibling <span class="hljs-keyword">import</span> example

尽量避免 <span class="hljs-keyword">from</span> &lt;module&gt; <span class="hljs-keyword">import</span> * 
---

多行对齐的时候，如果第一行有字，则下移行与第一行左
对齐,如果使用<span class="hljs-string">'悬挂'</span>式对齐，则第一行不要有字，注意左
侧要在一条竖线上。

<span class="hljs-comment"># Aligned with opening delimiter</span>
foo = long_function_name(var_one, var_two,
                         var_three, var_four)

<span class="hljs-comment"># More indentation included to distinguish this from the rest.</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">long_function_name</span><span class="hljs-params">(
        var_one, var_two, var_three,
        var_four)</span>:</span>
    print(var_one)

my_list = [
    <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>,
    <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>,
    ]
result = some_function_that_takes_arguments(
    <span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>,
    <span class="hljs-string">'d'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'f'</span>,
    )
---

空格

Yes: spam(ham[<span class="hljs-number">1</span>], {eggs: <span class="hljs-number">2</span>}) <span class="hljs-comment"># 各种括号内部紧接着的地方不加空格</span>

i = i + <span class="hljs-number">1</span> <span class="hljs-comment"># 双目运算符两边都要有空格</span>
submitted += <span class="hljs-number">1</span>
x = x*<span class="hljs-number">2</span> - <span class="hljs-number">1</span>
hypot2 = x*x + y*y <span class="hljs-comment"># 如果有优先级不同的运算时，低优先级的双目不加空格</span>
c = (a+b) * (a-b)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">complex</span><span class="hljs-params">(real, imag=<span class="hljs-number">0.0</span>)</span>:</span>   <span class="hljs-comment"># 方法中参数的=前后没有空格</span>
    <span class="hljs-keyword">return</span> magic(r=real, i=imag)

Yes: <span class="hljs-keyword">if</span> x == <span class="hljs-number">4</span>: <span class="hljs-keyword">print</span> x, y; x, y = y, x <span class="hljs-comment"># 标点符号(,:;)后加空格，</span>

Yes: spam(<span class="hljs-number">1</span>) <span class="hljs-comment"># 函数调用的时候()紧接着函数，不加空格</span>

Yes: dict[<span class="hljs-string">'key'</span>] = list[index] <span class="hljs-comment">#字典和数组也是一样</span>
---

注释

段落注释每行以<span class="hljs-comment"># 开头</span>
行注释最少两个空格隔开语句

文档注释 共有的类，方法需要写，私有的可以不写.
单行注释，做什么返回什么
<span class="hljs-string">"""Do X and return a list."""</span>

第一行紧接着写简短 描述，空开一行写详细描述，空开一行结尾
<span class="hljs-string">"""Return a foobang

Optional plotz says to frobnicate the bizbaz first.

"""</span>

命名
---
_single_leading_underscore  <span class="hljs-comment"># 私有的，from M import * 不会导入</span>
single_trailing_underscore_  <span class="hljs-comment"># 最后的下滑线防止与关键字等重名</span>
__double_leading_underscore  <span class="hljs-comment"># 类内部使用双下滑线的时候会重命名，</span>
                             <span class="hljs-comment"># 类FooBar内部, __boo -&gt;  _FooBar__boo</span>
__double_leading_and_trailing_underscore__  <span class="hljs-comment"># 双下划线是magic方法</span>

不要使用单个l O 做变量名字 可能会看成 <span class="hljs-number">1</span> <span class="hljs-number">0</span>

模块名和包名需要简短而且都是小写字母命名,如果能提高可读性，模块名
可以加下划线，模块名必须简短，因为模块名是文件夹的名字，有些操作系统会
截短文件夹名

类名使用驼峰式 CapWords
异常类后面加Error后缀
因为有<span class="hljs-keyword">from</span> M <span class="hljs-keyword">import</span> * ,使用 __all__ 的机制

方法名用小写下滑线分隔
如果是private方法和变量的话使用单下划线，双下滑线是为了防止在子类中的命名
冲突（python会自动重命名，子类只用双下滑线掉不到的）,这样就防止子类继承这个
属性了。

为继承设计
如果开始搞不清楚使用private还是public的时候，设置为private(python没有真正的
private)
</code></pre><h2 id="pylint-">pylint代码评估</h2>
<pre><code>pylint 比pep8要求更高的python代码分析

pip install pylint
pip install pylint-django <span class="hljs-preprocessor"># django插件</span>
pylint --load-plugins pylint_django tasks<span class="hljs-preprocessor">.py</span> <span class="hljs-preprocessor"># 启用django插件</span>
<span class="hljs-preprocessor"># 配置法启用pylint_django</span>
pylint --generate-rcfile &gt; ~/<span class="hljs-preprocessor">.pylintrc</span>
vim ~/<span class="hljs-preprocessor">.pylintrc</span>
找到 load-plugins= 填上插件名字pylint_django

disable=E1101,R0904,W0142,W0622,R0201,E1103,E0712


pylint task<span class="hljs-preprocessor">.py</span> <span class="hljs-preprocessor"># 此时启用了插件</span>
</code></pre><h2 id="python-">python语法技巧</h2>
<h2 id="-">按字符处理字符串</h2>
<pre><code><span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> <span class="hljs-built_in">string</span>:
    dosomething

map(<span class="hljs-keyword">fun</span>,<span class="hljs-built_in">string</span>)
</code></pre><h2 id="-">常用字符串</h2>
<pre><code><span class="hljs-keyword">import</span> <span class="hljs-built_in">string</span>
</code></pre><h2 id="isinstance-">isinstance可以判断多个类型</h2>
<pre><code>isinstance(obj,(<span class="hljs-built_in">type</span>1,<span class="hljs-built_in">type</span>2))

isinstance(<span class="hljs-string">'duoduo'</span>,basestring)
</code></pre><h2 id="-">对齐</h2>
<pre><code>ljust,rjust,center(<span class="hljs-number">20</span>,<span class="hljs-string">'补位符'</span>)
<span class="hljs-string">'  duoduo'</span>.ljust(<span class="hljs-number">20</span>,<span class="hljs-string">'*)</span>
</code></pre><h2 id="join">join</h2>
<pre><code><span class="hljs-keyword">join</span>前面的东西插入到间隔中
<span class="hljs-string">',*'</span>.<span class="hljs-keyword">join</span>(<span class="hljs-keyword">map</span>(str,xrange(<span class="hljs-number">5</span>))) --&gt; <span class="hljs-string">'0,*1,*2,*3,*4'</span>
</code></pre><h2 id="-">将字符串按照自己定义的间隔分割</h2>
<pre><code>cuts = [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">8</span>]
zip([<span class="hljs-number">0</span>]+cuts,cuts+[None]) <span class="hljs-comment">--&gt; [(0, 2), (2, 3), (3, 5), (5, 8), (8,</span>
None)]

s = <span class="hljs-string">'duoduo     duoduo'</span>
pieces = [s[i:j] <span class="hljs-keyword">for</span> i,j <span class="hljs-keyword">in</span> zip([<span class="hljs-number">0</span>]+cuts,cuts+[None])]
</code></pre><h2 id="split-">split分割字符串</h2>
<pre><code>当<span class="hljs-built_in">split</span>的规则有多个时，使用re的<span class="hljs-built_in">split</span>

tring = <span class="hljs-string">"the,rain;in,spain"</span>
pattern = re.compile(<span class="hljs-string">',|;'</span>)
<span class="hljs-keyword">words</span> = pattern.<span class="hljs-built_in">split</span>(<span class="hljs-keyword">string</span>)
</code></pre><h2 id="-">对象比较</h2>
<pre><code>tuple, <span class="hljs-built_in">list</span>比较时候可以这样
(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>) &lt; (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>) <span class="hljs-preprocessor"># True</span>
<span class="hljs-preprocessor"># http:<span class="hljs-comment">//stackoverflow.com/questions/5292303/python-tuple-comparison</span></span>
</code></pre><h2 id="-">同行间隔字符串会自动连接</h2>
<pre><code><span class="hljs-string">'Hello, world'</span> == <span class="hljs-string">"Hello"</span> <span class="hljs-string">", "</span> <span class="hljs-string">"world"</span>
不同行的字符串也会链接
<span class="hljs-operator">a</span> = <span class="hljs-string">'aabc'</span>
    <span class="hljs-string">'def'</span>

<span class="hljs-operator">a</span> == <span class="hljs-string">'aabcdef'</span> <span class="hljs-comment"># True,</span>
               <span class="hljs-comment"># 有一次因为这个原因出的bug找了好久才发现</span>
               <span class="hljs-comment"># 类似这样,元组每行需要','分隔，第二行漏了</span>
               <span class="hljs-comment"># some_tuple = (</span>
                    <span class="hljs-string">'abc'</span>,
                    <span class="hljs-string">'bed'</span>
                    <span class="hljs-string">'edf'</span>,
               )
</code></pre><h2 id="-">三个引号注意最后的引号</h2>
<pre><code><span class="hljs-string">""</span><span class="hljs-string">"last need \""</span><span class="hljs-string">""</span>
<span class="hljs-string">''</span><span class="hljs-string">'last need \'</span><span class="hljs-string">''</span><span class="hljs-string">'</span>
</code></pre><h2 id="-">万物皆对象</h2>
<pre><code>isinstance(<span class="hljs-keyword">None</span>,object) == <span class="hljs-keyword">True</span> <span class="hljs-comment"># None 也是对象</span>
<span class="hljs-keyword">None</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">None</span> <span class="hljs-comment"># 只有1个None</span>
</code></pre><h2 id="-">切片</h2>
<pre><code>前闭后开  <span class="hljs-tag">a</span><span class="hljs-attr_selector">[0:3]</span> <span class="hljs-tag">--</span>&gt; 下表0～2
前 &lt; 后才有值，否则为<span class="hljs-attr_selector">[]</span>
</code></pre><h2 id="-dict">创建有默认值的dict</h2>
<pre><code>d = <span class="hljs-list">{}</span>.fromkeys((<span class="hljs-string">'key1'</span>,<span class="hljs-string">'key2'</span>),<span class="hljs-string">'value'</span>)
</code></pre><h2 id="-">格式化字符串</h2>
<pre><code>value1 = <span class="hljs-string">'doh'</span>
value2 = <span class="hljs-string">'DOH'</span>
<span class="hljs-number">1</span>. string = <span class="hljs-string">"The values are {1}, {0}, {0} and {1}!"</span>.<span class="hljs-keyword">format</span>(value1, value2)
<span class="hljs-number">2</span>. string = <span class="hljs-string">"The values are <span class="hljs-variable">%s</span>, <span class="hljs-variable">%s</span>, <span class="hljs-variable">%s</span> and <span class="hljs-variable">%s</span>!"</span>. % (value2,value1,value1, value2)

小数点
string = <span class="hljs-string">"The square root of 5 is {0:.{1}f}"</span>.<span class="hljs-keyword">format</span>(math.<span class="hljs-keyword">sqrt</span>(<span class="hljs-number">5</span>), <span class="hljs-number">4</span>)
</code></pre><h2 id="r-">r字符的一些问题</h2>
<pre><code>len(<span class="hljs-string">'\n'</span>) == <span class="hljs-number">1</span>
len(<span class="hljs-string">r'\n'</span>) == <span class="hljs-number">2</span>

<span class="hljs-string">'\n'</span> != <span class="hljs-string">r'\n'</span>

raw string 常用于 正则，文件路径，url
</code></pre><h2 id="python-class">python新旧class</h2>
<pre><code><span class="hljs-keyword">class</span> OldStyleClass:
    <span class="hljs-string">"An old style class"</span>

<span class="hljs-keyword">class</span> NewStyleClass(<span class="hljs-keyword">object</span>):
    <span class="hljs-string">"A new style class"</span>
    pass

<span class="hljs-class"><span class="hljs-keyword">type</span>(</span>OldStyleClass).__name__ ==  <span class="hljs-string">'classobj'</span> #old <span class="hljs-keyword">class</span> 没有__class__
<span class="hljs-class"><span class="hljs-keyword">type</span>(</span>NewStyleClass) == NewStyleClass.__class__ == <span class="hljs-class"><span class="hljs-keyword">type</span></span>

old_style = OldStyleClass()
new_style = NewStyleClass()

old_style.__class__.__name__ == <span class="hljs-string">'OldStyleClass'</span>
new_style.__class__.__name__ == <span class="hljs-string">'NewStyleClass'</span>

<span class="hljs-class"><span class="hljs-keyword">type</span>(</span>old_style).__name__ == <span class="hljs-string">'instance'</span>
<span class="hljs-class"><span class="hljs-keyword">type</span>(</span>new_style).__name__ == <span class="hljs-string">'NewStyleClass'</span>
</code></pre><h2 id="-">函数式</h2>
<pre><code><span class="hljs-keyword">import</span> functools
functools.partial(func,部分参数) ==&gt; 新的方法
对于 fun(a,b,c=<span class="hljs-keyword">None</span>)这种方法，暂时没找到如何只设置b的方法
</code></pre><h2 id="from-xxx-import-">from XXX import *</h2>
<pre><code>控制*时，需要在脚本中添加
__all__ = (XXX,XXX) <span class="hljs-comment"># 此时improt * 时只会导入 XXX,XXX</span>
</code></pre><h2 id="-">类方法，静态方法，普通方法</h2>
<pre><code><span class="hljs-number">1</span>.普通方法 第一个参数是<span class="hljs-keyword">self</span>(对象)
<span class="hljs-number">2</span>.类方法 第一个参数是cls(类)
<span class="hljs-number">3</span>.静态方法 没有第一个参数

从第一个参数的默认命名规范上就可以基本
猜出这几个方法的不同之处

<span class="hljs-number">1</span>.普通方法需要新建一个实例，用obj.fun调用
<span class="hljs-number">2</span>.<span class="hljs-variable">@classmethod</span> <span class="hljs-variable">@staticmethod</span> 类方法和静态
方法即可以通过类直接调用， 也可以通过实例
调用,需要注意一点，当他们与普通方法重名的
时候会覆盖普通方法。
<span class="hljs-number">3</span>.类方法类似java和c++类里面的静态方法
</code></pre><h2 id="python-">python私有方法</h2>
<pre><code><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span></span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> </span>__method(<span class="hljs-keyword">self</span>)<span class="hljs-symbol">:</span>
        pass

<span class="hljs-constant">Dog</span>()._Dog__method() <span class="hljs-comment"># 依然可以调用</span>
</code></pre><h2 id="-">异常</h2>
<pre><code>抓到的异常的[<span class="hljs-number">0</span>] 为异常信息message
<span class="hljs-keyword">except</span> RuntimeError <span class="hljs-keyword">as</span> ex:
    <span class="hljs-keyword">print</span> ex[<span class="hljs-number">0</span>]
</code></pre><h2 id="python-">python解析</h2>
<pre><code>以前只知道有里表解析，好吧涨见识了

列表解析 []
<span class="hljs-bullet">---
</span>c = [(i,j) for i,j in enumerate(range(5))]
==&gt; [(0, 0), (1, 1), (2, 2), (3, 3), (4, 4)]

<span class="hljs-header">字典解析 {key:value XXXX}
---</span>
c = {i:j for i,j in enumerate(range(5))}
==&gt; {0: 0, 1: 1, 2: 2, 3: 3, 4: 4}

<span class="hljs-header">集合解析 {value XXXX}
---</span>
c = {i for i,j in enumerate(range(5))}
==&gt; set([0, 1, 2, 3, 4])
</code></pre><h2 id="property">property</h2>
<pre><code><span class="hljs-keyword">property</span>(fget=None, fset=None, fdel=None, doc=None)

类里面用<span class="hljs-keyword">property</span>装饰器的时候，如果不加参数
就是<span class="hljs-keyword">get</span>,加的话一般是设置getter/setter,
注意先<span class="hljs-keyword">get</span>,后<span class="hljs-keyword">set</span>
</code></pre><h2 id="__getattr__-__getattribute__-getattr"><strong>getattr</strong> <strong>getattribute</strong> getattr</h2>
<pre><code>__getattribute__  <span class="hljs-preprocessor"># 只用户新式类(继承自object),只要有任何属性访问，</span>
就会调用
__getattr__  <span class="hljs-preprocessor"># 只有在不包含某个属性的时候才会被调用，也就是说</span>
是在__getattribute__发生AttributeError之后才会调用

getattr  <span class="hljs-preprocessor"># 有这么一个解释 </span>
         <span class="hljs-preprocessor"># You use __getattr__ to <span class="hljs-keyword">define</span> how to handle attributes that are not found </span>
         <span class="hljs-preprocessor"># and </span>
         <span class="hljs-preprocessor"># getattr to get the attributes </span>
         <span class="hljs-preprocessor"># 可见 getattr与__getattribute__类似</span>
</code></pre><h2 id="__setattr__-"><strong>setattr</strong>的递归问题</h2>
<pre><code>__setattr_<span class="hljs-number">_</span>会在每次进行赋值操作的时候被调用，
即 <span class="hljs-keyword">self</span>.foo = bar 这样会导致递归
解决的办法是使用<span class="hljs-keyword">self</span>.__dict_<span class="hljs-number">_</span>[<span class="hljs-string">'foo'</span>] = bar
新式类使用 object.__setattr_<span class="hljs-number">_</span>(<span class="hljs-keyword">self</span>, item, value)
</code></pre><h2 id="-print">向文件添加一行 print</h2>
<pre><code><span class="hljs-label">http:</span>//www<span class="hljs-preprocessor">.python</span><span class="hljs-preprocessor">.org</span>/dev/peps/pep-<span class="hljs-number">0214</span>/
print &gt;&gt; fileobj, <span class="hljs-string">"line str"</span>
PEP <span class="hljs-number">214</span> http://www<span class="hljs-preprocessor">.python</span><span class="hljs-preprocessor">.org</span>/dev/peps/pep-<span class="hljs-number">0214</span>/
</code></pre><h2 id="python-cook">python cook</h2>
<pre><code>collection.deque rotate 列表旋转
    q = deque([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>])
    q.rotate(<span class="hljs-number">2</span>)  <span class="hljs-comment"># -&gt; deque([8, 9, 0, 1, 2, 3, 4, 5, 6, 7])</span>


sorted sort key
    里面有个key=XXX参数，使用这个参数时会在第一次比较的时候
    应用这个方法，比在cmp里面使用一些方法处理要快，因为cmp每次
    比较的时候都会调用一次

    In [<span class="hljs-number">32</span>]: sorted(<span class="hljs-string">"bqwDAdasf"</span>,key=str.lower)
    Out[<span class="hljs-number">32</span>]: ['A', 'a', 'b', 'D', 'd', 'f', 'q', 's', 'w']

operator
    attrgetter,itemgetter是取出指定某元素的好方法

    attrgetter 这个方法是取某个属性，类似object.getattr(obj,attr)
    不同的是attrgetter先将attr取出来做回调，obj后来再传

    <span class="hljs-type">class</span> attrgetter(__builtin__.object)
     |  attrgetter(attr, ...) <span class="hljs-comment">--&gt; attrgetter object</span>
     |  
     |  Return a callable object <span class="hljs-keyword">that</span> fetches <span class="hljs-keyword">the</span> <span class="hljs-keyword">given</span> attribute(s) <span class="hljs-keyword">from</span> <span class="hljs-keyword">its</span> operand.
     |  After, f=attrgetter('<span class="hljs-property">name</span>'), <span class="hljs-keyword">the</span> call f(r) returns r.<span class="hljs-property">name</span>.
     |  After, g=attrgetter('<span class="hljs-property">name</span>', '<span class="hljs-type">date</span>'), <span class="hljs-keyword">the</span> call g(r) returns (r.<span class="hljs-property">name</span>, r.<span class="hljs-type">date</span>).
     |  After, h=attrgetter('<span class="hljs-property">name</span>.<span class="hljs-keyword">first</span>', '<span class="hljs-property">name</span>.<span class="hljs-keyword">last</span>'), <span class="hljs-keyword">the</span> call h(r) returns
     |  (r.<span class="hljs-property">name</span>.<span class="hljs-keyword">first</span>, r.<span class="hljs-property">name</span>.<span class="hljs-keyword">last</span>).

    itemgetter 则是取数组指定下表

    <span class="hljs-type">class</span> itemgetter(__builtin__.object)
     |  itemgetter(<span class="hljs-property">item</span>, ...) <span class="hljs-comment">--&gt; itemgetter object</span>
     |  
     |  Return a callable object <span class="hljs-keyword">that</span> fetches <span class="hljs-keyword">the</span> <span class="hljs-keyword">given</span> <span class="hljs-property">item</span>(s) <span class="hljs-keyword">from</span> <span class="hljs-keyword">its</span> operand.
     |  After, f=itemgetter(<span class="hljs-number">2</span>), <span class="hljs-keyword">the</span> call f(r) returns r[<span class="hljs-number">2</span>].
     |  After, g=itemgetter(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>), <span class="hljs-keyword">the</span> call g(r) returns (r[<span class="hljs-number">2</span>], r[<span class="hljs-number">5</span>], r[<span class="hljs-number">3</span>])
</code></pre><h2 id="groupby-">groupby的用法</h2>
<pre><code><span class="hljs-title">groupby</span>与sql的groupby不太一样，返回的k,v中的v比较特别，
<span class="hljs-title">groupby</span>(iter,func),当func的值改变的时候，groupby认为是另一个
分组:
    groupby: [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>] <span class="hljs-comment">--&gt; [(1,iter),(2,iter),(3,iter),(1,iter)]</span>
    有两点和sql以及想想的可能不同
        上例中最后诡异的<span class="hljs-number">1</span>,
        上例中除了最后一个每个iter是空的
    groupby: [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>] <span class="hljs-comment">--&gt; [(1,iter),(2,iter),(3,iter)]</span>

因此使用groupby之前必须先排序，而且排序的规则(sorted的key)
就是groupby中的func,参考代码如下

<span class="hljs-preprocessor"># -*- coding: utf-8 -*-</span>
<span class="hljs-title">from</span> itertools <span class="hljs-import"><span class="hljs-keyword">import</span> groupby</span>
<span class="hljs-title">from</span> operator <span class="hljs-import"><span class="hljs-keyword">import</span> attrgetter</span>
<span class="hljs-title">from</span> collections <span class="hljs-import"><span class="hljs-keyword">import</span> defaultdict</span>
<span class="hljs-class">

<span class="hljs-keyword">class</span> <span class="hljs-type">Model</span><span class="hljs-container">(<span class="hljs-title">object</span>)</span>:
    def __init__<span class="hljs-container">(<span class="hljs-title">self</span>, <span class="hljs-title">id</span>)</span>:
        super<span class="hljs-container">(<span class="hljs-type">Model</span>, <span class="hljs-title">self</span>)</span>.__init__<span class="hljs-container">()</span>
        self.id = id
    def __unicode__<span class="hljs-container">(<span class="hljs-title">self</span>)</span>:
        return unicode<span class="hljs-container">(<span class="hljs-title">self</span>.<span class="hljs-title">id</span>)</span>

test = []

for i in xrange<span class="hljs-container">(5)</span>:
    test.append<span class="hljs-container">(<span class="hljs-type">Model(i)</span>)</span>

for i in xrange<span class="hljs-container">(10)</span>:
    test.append<span class="hljs-container">(<span class="hljs-type">Model(i)</span>)</span>

# 可以修改此处，直接groupby不排序

keyfunc = attrgetter<span class="hljs-container">('<span class="hljs-title">id'</span>)</span>
test = sorted<span class="hljs-container">(<span class="hljs-title">test</span>, <span class="hljs-title">key</span>=<span class="hljs-title">keyfunc</span>)</span>
gb = groupby<span class="hljs-container">(<span class="hljs-title">test</span>, <span class="hljs-title">keyfunc</span>)</span>

result = defaultdict<span class="hljs-container">(<span class="hljs-title">list</span>)</span>

for k, g in gb:
    result[k].extend<span class="hljs-container">(<span class="hljs-title">list</span>(<span class="hljs-title">g</span>)</span>)</span>
</code></pre><h2 id="wraps">wraps</h2>
<p>使用wrap写装饰器的时候会把doc之类的东西带上</p>
<p>Python: Why to use @wraps with decorators?
<a href="http://artemrudenko.wordpress.com/2013/04/15/python-why-you-need-to-use-wraps-with-decorators/" target="_blank">http://artemrudenko.wordpress.com/2013/04/15/python-why-you-need-to-use-wraps-with-decorators/</a></p>
<pre><code>__author__ = <span class="hljs-string">'artemr'</span>

<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">without_wraps</span><span class="hljs-params">(func)</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__wrapper</span><span class="hljs-params">(*args, **kwargs)</span>:</span>
        <span class="hljs-keyword">return</span> func(*args, **kwargs)
    <span class="hljs-keyword">return</span> __wrapper

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">with_wraps</span><span class="hljs-params">(func)</span>:</span>
    <span class="hljs-decorator">@wraps(func)</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__wrapper</span><span class="hljs-params">(*args, **kwargs)</span>:</span>
        <span class="hljs-keyword">return</span> func(*args, **kwargs)
    <span class="hljs-keyword">return</span> __wrapper

<span class="hljs-decorator">@without_wraps</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">my_func_a</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-string">"""Here is my_func_a doc string text."""</span>
    <span class="hljs-keyword">pass</span>

<span class="hljs-decorator">@with_wraps</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">my_func_b</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-string">"""Here is my_func_b doc string text."""</span>
    <span class="hljs-keyword">pass</span>

<span class="hljs-comment"># Below are the results without using @wraps decorator</span>
<span class="hljs-keyword">print</span> my_func_a.__doc__
<span class="hljs-prompt">&gt;&gt;&gt; </span><span class="hljs-keyword">None</span>
<span class="hljs-keyword">print</span> my_func_a.__name__
<span class="hljs-prompt">&gt;&gt;&gt; </span>__wrapper

<span class="hljs-comment"># Below are the results with using @wraps decorator</span>
<span class="hljs-keyword">print</span> my_func_b.__doc__
<span class="hljs-prompt">&gt;&gt;&gt; </span>Here <span class="hljs-keyword">is</span> my_func_b doc string text.
<span class="hljs-keyword">print</span> my_func_b.__name__
<span class="hljs-prompt">&gt;&gt;&gt; </span>my_func_b
</code></pre><h2 id="pil">PIL</h2>
<pre><code>import Image
im = Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">'file.jpg'</span>)
im.show() <span class="hljs-comment"># 显示图片</span>
im.thumbnail(size)  <span class="hljs-comment"># 缩略图</span>
im.save(outfile, <span class="hljs-string">"JPEG"</span>) <span class="hljs-comment"># 存文件</span>
box = (<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">400</span>, <span class="hljs-number">400</span>)
region = im.crop(box) <span class="hljs-comment"># 切文件,(left, upper, right, lower)</span>
                      <span class="hljs-comment"># 左边的竖线...right &gt; left, lower &gt; upper</span>
                      <span class="hljs-comment"># (0, 0) in the upper left corner</span>
r, g, b = im.<span class="hljs-built_in">split</span>() <span class="hljs-comment"># 把图片的r, g, b分出来</span>
im = Image.<span class="hljs-built_in">merge</span>(<span class="hljs-string">"RGB"</span>, (b, g, b)) <span class="hljs-comment"># 按照任意顺序合回去,颜色会变</span>
out = im.resize((<span class="hljs-number">128</span>, <span class="hljs-number">128</span>)) <span class="hljs-comment"># 缩放</span>
out = im.rotate(<span class="hljs-number">45</span>) <span class="hljs-comment"># 旋转</span>
im.<span class="hljs-built_in">transpose</span>(Image.ROTATE_90) <span class="hljs-comment"># 旋转</span>
out = im.<span class="hljs-built_in">transpose</span>(Image.FLIP_LEFT_RIGHT) <span class="hljs-comment"># 反转</span>
out = im.<span class="hljs-built_in">transpose</span>(Image.FLIP_TOP_BOTTOM) <span class="hljs-comment"># 反转</span>
</code></pre><h2 id="python-">python部分脚本</h2>
<h1 id="python-">python写的脚本</h1>
<h2 id="tomcat-4-">tomcat相关脚本(4个)</h2>
<h2 id="-">字符串替换脚本</h2>
<p>需要系统中有python sed</p>
<p>用法:python 需要替换的文件路径 原字符串 目标字符串</p>
<pre><code><span class="hljs-comment">#!/usr/bin/env python</span>
<span class="hljs-comment">#coding=utf-8</span>
<span class="hljs-comment"># 字符串重命名脚本 </span>
<span class="hljs-comment"># 用法:file old_str new_str </span>
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys

<span class="hljs-keyword">if</span> __name__==<span class="hljs-string">'__main__'</span>:
    <span class="hljs-keyword">if</span> len(sys.argv) == <span class="hljs-number">4</span>:
        file_path = sys.argv[<span class="hljs-number">1</span>]
        old_name = sys.argv[<span class="hljs-number">2</span>]
        new_name = sys.argv[<span class="hljs-number">3</span>]
        <span class="hljs-keyword">if</span> os.path.exists(file_path): 
            <span class="hljs-keyword">print</span> <span class="hljs-string">'把文件"%s"中的"%s"字符串替换为"%s"'</span> % (file_path,old_name, new_name)
            os.system(<span class="hljs-string">'''sed -i "" -e "s/%s/%s/g" "%s" 2&gt;/dev/null'''</span> % (old_name, new_name, file_path))
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">print</span> <span class="hljs-string">'%s 不存在，请检查你的输入'</span> % file_path
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">print</span> <span class="hljs-string">'Usage: python replace_str.py file_path old_str new_str'</span>
        <span class="hljs-keyword">print</span> <span class="hljs-string">'rename之前,建议先备份原代码'</span>
</code></pre><h2 id="tomcat-server-xml-">tomcat 里面的server.xml文件端口替换脚本</h2>
<p>多个tomcat的时候需要替换这几个端口号t(&quot;8080&quot;,&quot;8009&quot;,&quot;8443&quot;,&quot;8005&quot;)，需要用到之前的字符串低换脚本</p>
<p>用法： python replace_tomcat_server_port.py replace_str.py文件路径 替换server.xml端口加的阀值，例如如果server_num=4,(&quot;8080&quot;,&quot;8009&quot;,&quot;8443&quot;,&quot;8005&quot;)--&gt;(&quot;8084&quot;,&quot;8013&quot;,&quot;8447&quot;,&quot;8009&quot;)</p>
<pre><code><span class="hljs-comment">#!/usr/bin/env python</span>
<span class="hljs-comment">#coding=utf-8</span>
<span class="hljs-comment"># tomcat server.xml端口重命名脚本,以第一个tomcat为基准</span>
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> os 

PORTS=(<span class="hljs-string">"8080"</span>,<span class="hljs-string">"8009"</span>,<span class="hljs-string">"8443"</span>,<span class="hljs-string">"8005"</span>)

<span class="hljs-keyword">if</span> __name__==<span class="hljs-string">'__main__'</span>:
    <span class="hljs-keyword">if</span> len(sys.argv) == <span class="hljs-number">4</span>:
        replace_strpy_path = sys.argv[<span class="hljs-number">1</span>]
        tomcat_path = sys.argv[<span class="hljs-number">2</span>]
        server_num = sys.argv[<span class="hljs-number">3</span>]
        serverxml_path = <span class="hljs-string">"%s/conf/server.xml"</span> % tomcat_path
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(replace_strpy_path):
            <span class="hljs-keyword">print</span> <span class="hljs-string">"替换脚本%s不存在"</span> % (replace_strpy_path)
            exit(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> replace_strpy_path.endswith(<span class="hljs-string">"py"</span>):
            <span class="hljs-keyword">print</span> <span class="hljs-string">"替换脚本路径%s 输入有误"</span> % (replace_strpy_path)
            exit(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(serverxml_path): 
            <span class="hljs-keyword">print</span> <span class="hljs-string">'%s 不存在，请检查你的输入'</span> % serverxml_path
            exit(<span class="hljs-number">1</span>)        
        <span class="hljs-keyword">try</span>:
            server_num = int(server_num)
            <span class="hljs-keyword">if</span> server_num &lt;= <span class="hljs-number">0</span>:
                <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">"参数 server_num 输入错误,应该大于0"</span>)
                exit(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">except</span>:
            <span class="hljs-keyword">print</span> <span class="hljs-string">'参数 server_num 输入类型错误，应该为int'</span> % server_num
            exit(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">for</span> port <span class="hljs-keyword">in</span> PORTS:
               <span class="hljs-comment"># print "%s %s %s %s " %  (replace_strpy_path,serverxml_path, port, str(int(port)+server_num))</span>
                os.system(<span class="hljs-string">'''"%s" %s %s %s 2&gt;/dev/null'''</span> % (replace_strpy_path,serverxml_path, port, str(int(port)+server_num)))
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">print</span> <span class="hljs-string">'Usage: python replace_tomcat_server_port.py /filepath/replace_str.py server_num(int)'</span>
        <span class="hljs-keyword">print</span> <span class="hljs-string">'rename之前,建议先备份原代码'</span>
</code></pre><h2 id="tomcat-">tomcat复制脚本</h2>
<p>tomcat复制脚本，复制之后会进行server.xml的端口重命名，用到了之前的server.xml文件端口替换脚本，和字符串替换脚本，需要将他们放在一个文件夹中。</p>
<p>用法：Usage: python cp_tomcat.py 要拷贝的tomcat的路径 拷贝的份数</p>
<h1 id="-usr-bin-env-python">!/usr/bin/env python</h1>
<pre><code><span class="hljs-comment">#coding=utf-8</span>
<span class="hljs-comment">#tomcat复制脚本，复制之后会进行server.xml的端口重命名</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    <span class="hljs-keyword">if</span> len(sys.argv) == <span class="hljs-number">3</span>:
        tomcat_path = sys.argv[<span class="hljs-number">1</span>]
        cp_nums = sys.argv[<span class="hljs-number">2</span>]

        this_file_path = os.path.split(os.path.realpath(__file__))[<span class="hljs-number">0</span>]
        replace_tomcat_server_port_py_path = <span class="hljs-string">'%s/replace_tomcat_server_port.py'</span> %(this_file_path)
        place_strpy_path = <span class="hljs-string">'%s/replace_str.py'</span> % (this_file_path)
        <span class="hljs-keyword">try</span>:
            cp_nums = int(cp_nums)
            <span class="hljs-keyword">if</span> cp_nums &lt;= <span class="hljs-number">0</span>:
                <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">"参数 server_num 输入错误,应该大于0"</span>)
                exit(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">except</span>:
            <span class="hljs-keyword">print</span> <span class="hljs-string">'参数拷贝份数 cp_nums 输入类型错误，应该为int'</span> % cp_nums
            exit(<span class="hljs-number">1</span>)    
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(tomcat_path):
            <span class="hljs-keyword">print</span> <span class="hljs-string">'tomcat路径输入有误：%s'</span> % (tomcat_path)
            exit(<span class="hljs-number">1</span>)    
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(replace_tomcat_server_port_py_path):
            <span class="hljs-keyword">print</span> <span class="hljs-string">'替换server.xml脚本%s不存在 请将%s放在同一文件夹下'</span> % (place_strpy_path,<span class="hljs-string">'replace_tomcat_server_port.py'</span>)
            exit(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(place_strpy_path):
            <span class="hljs-keyword">print</span> <span class="hljs-string">'替换脚本%s不存在 请将%s放在同一文件夹下'</span> % (place_strpy_path,<span class="hljs-string">'replace_str.py'</span>)
            exit(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">try</span>:    
            <span class="hljs-keyword">print</span> <span class="hljs-string">'bin/*.sh 添加x权限'</span> 
            os.system(<span class="hljs-string">'chmod +x %s/bin/*.sh'</span> % (tomcat_path))
        <span class="hljs-keyword">except</span>:
            <span class="hljs-keyword">print</span> <span class="hljs-string">'为%s/bin/*.sh文件添加权限时发生错误，请检查你tomcat的路径是否输入正确'</span> % (tomcat_path)
            exit(<span class="hljs-number">1</span>)

        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> xrange(<span class="hljs-number">1</span>,cp_nums+<span class="hljs-number">1</span>):
            cp_tomcat_path = <span class="hljs-string">'%s_%s'</span> % (tomcat_path,i)
            <span class="hljs-keyword">print</span> <span class="hljs-string">'复制tomcat文件 %s  to %s'</span> % (tomcat_path,cp_tomcat_path)
            os.system(<span class="hljs-string">'cp -r %s %s'</span> % (tomcat_path,cp_tomcat_path))
            <span class="hljs-keyword">print</span> <span class="hljs-string">'server.xml端口号重命名'</span>
            os.system(<span class="hljs-string">'''"%s" %s %s %s 2&gt;/dev/null'''</span> % (replace_tomcat_server_port_py_path,place_strpy_path, cp_tomcat_path, i))
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">print</span> <span class="hljs-string">'Usage: python cp_tomcat.py tomcat_path cp_nums'</span>
        <span class="hljs-keyword">print</span> <span class="hljs-string">'rename之前,建议先备份原代码'</span>
</code></pre><h2 id="tomcat-">tomcat集群启动关闭脚本</h2>
<p> 用法：Usage: python tomcats.py (start|shutdown) 第一个tomcat位置 启动或者关闭的份数</p>
<h1 id="-usr-bin-env-python">!/usr/bin/env python</h1>
<pre><code><span class="hljs-comment">#coding=utf-8</span>
<span class="hljs-comment"># 启动或关闭tomcat集群，以第一个tomcat的端口为基准</span>

import os
import sys

FIRST_TOMCAT_PORT = <span class="hljs-number">8080</span>

<span class="hljs-keyword">if</span> __name_<span class="hljs-number">_</span>==<span class="hljs-string">"__main__"</span>:
    <span class="hljs-keyword">if</span> len(sys.argv) == <span class="hljs-number">4</span>:
        cmd_type = sys.argv[<span class="hljs-number">1</span>]
        first_tomcat_path = sys.argv[<span class="hljs-number">2</span>]    
        nums = sys.argv[<span class="hljs-number">3</span>]
        try:
            cmd_type = cmd_type.strip()
            <span class="hljs-keyword">if</span> cmd_type != <span class="hljs-string">"start"</span> <span class="hljs-keyword">and</span> cmd_type != <span class="hljs-string">"shutdown"</span>:
                <span class="hljs-keyword">print</span> <span class="hljs-string">"cmd_type应为(<span class="hljs-variable">%s</span>|<span class="hljs-variable">%s</span>)"</span> % (<span class="hljs-string">"start"</span>,<span class="hljs-string">"shutdown"</span>)
                <span class="hljs-keyword">exit</span>(<span class="hljs-number">1</span>)
        except:
             <span class="hljs-keyword">print</span> <span class="hljs-string">"cmd_type应为(<span class="hljs-variable">%s</span>|<span class="hljs-variable">%s</span>)"</span> % (<span class="hljs-string">"start"</span>,<span class="hljs-string">"shutdown"</span>)
             <span class="hljs-keyword">exit</span>(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.<span class="hljs-keyword">exists</span>(first_tomcat_path):
            <span class="hljs-keyword">print</span> <span class="hljs-string">"队首tomcat路径输入有误：<span class="hljs-variable">%s</span>"</span> % (first_tomcat_path)
            <span class="hljs-keyword">exit</span>(<span class="hljs-number">1</span>)
        try:
            nums = <span class="hljs-keyword">int</span>(nums)
            <span class="hljs-keyword">if</span> nums &lt;= <span class="hljs-number">0</span>:
                raise Exception(<span class="hljs-string">"参数 nums 输入错误,应该大于0"</span>)
                <span class="hljs-keyword">exit</span>(<span class="hljs-number">1</span>)
        except:
            <span class="hljs-keyword">print</span> <span class="hljs-string">"参数 nums 输入类型错误，应该为int"</span> % nums
            <span class="hljs-keyword">exit</span>(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">if</span> cmd_type == <span class="hljs-string">"start"</span>:
            cmd = <span class="hljs-string">"startup.sh"</span>
        <span class="hljs-keyword">else</span>:
            cmd = <span class="hljs-string">"shutdown.sh"</span>
        <span class="hljs-comment"># 第一个tomcat</span>
        os.<span class="hljs-keyword">system</span>(<span class="hljs-string">"<span class="hljs-variable">%s</span>/bin/<span class="hljs-variable">%s</span>"</span> % (first_tomcat_path,cmd))
        <span class="hljs-comment"># 其余的tomcat</span>
        <span class="hljs-keyword">if</span> nums &gt; <span class="hljs-number">1</span>:
            <span class="hljs-keyword">for</span> i in xrange(<span class="hljs-number">1</span>,nums):
                os.<span class="hljs-keyword">system</span>(<span class="hljs-string">"<span class="hljs-variable">%s_</span><span class="hljs-variable">%s</span>/bin/<span class="hljs-variable">%s</span>"</span>% (first_tomcat_path,i,cmd)) 
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">print</span> <span class="hljs-string">"Usage: python tomcats.py (start|shutdown) first_tomcat_path nums(int) "</span>
</code></pre><h2 id="python-">python部分资源|文章</h2>
<h2 id="-">文章</h2>
<pre><code><span class="hljs-preprocessor"># Python 开发者应该知道的 7个开发库</span>
<span class="hljs-label">http:</span>//www<span class="hljs-preprocessor">.oschina</span><span class="hljs-preprocessor">.net</span>/question/<span class="hljs-number">12</span>_78983

<span class="hljs-preprocessor"># Python Best Practice</span>
<span class="hljs-label">http:</span>//stevenloria<span class="hljs-preprocessor">.com</span>/python-best-practice-patterns-by-vladimir-keleshev-notes/?utm_content=buffer98fb1&amp;utm_medium=social&amp;utm_source=twitter<span class="hljs-preprocessor">.com</span>&amp;utm_campaign=buffer

<span class="hljs-preprocessor"># python协程，超棒的帖子各种例子</span>
<span class="hljs-label">http:</span>//www<span class="hljs-preprocessor">.dabeaz</span><span class="hljs-preprocessor">.com</span>/coroutines/
</code></pre><h2 id="-python_koans">学习脚本 python_koans</h2>
<p><a href="https://github.com/gregmalcolm/python_koans" target="_blank">https://github.com/gregmalcolm/python_koans</a></p>

                
                </section>
            
            </div>

            <div class="page-footer">
    
        
            
            <a href="../python/django.issue.html" class="navigation-link next">Next</a>
            
        
    
</div>
        </div>
    </div>
</div>

        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../gitbook/app.js"></script>
        
    </body>
</html>
